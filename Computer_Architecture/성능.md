# 성능
컴퓨터의 성능은 여러 가지 방법으로 정의할 수 있다.  
컴퓨터 사용자 개인의 입장에서는 응답시간(response time, 실행시간)이 중요할 것이다. 그러나 데이터센터 관리자에게는 처리량(throughput) 혹은 대역폭이 더 중요하다.  
> 처리량: 대역폭이라고도 한다. 단위 시간당 완료하는 태스크의 수를 나타낸다.  
  
대부분의 실제 컴퓨터에서 실행시간이나 처리량 중 하나가 변하면 다른 쪽에도 영향을 미친다.  
  
어떤 컴퓨터 X의 성능과 실행시간의 관계를 다음과 같이 표시할 수 있다.  
$성능_X = \frac{1}{실행시간_X}$   
  
그러므로 두 컴퓨터 X와 Y에 대해 X의 성능이 Y의 성능보다 좋다면  
$성능x > 성능 y$      
$\frac{1}{실행시간_X} > \frac{1}{실행시간_Y}$      
$실행시간y > 실행시간x$      
  
가 된다. 즉 X가 Y보다 빠르다면 Y에서의 실행시간이 X에서의 실행시간보다 길다.  
  
성능과 실행시간은 역관계이므로, 성능을 증가시키면 실행시간은 감소한다.  
  
## 성능의 측정  
시간은 컴퓨터 성능의 가장 기본적인 척도이다. 같은 작업을 최단 시간에 실행하는 컴퓨터가 가장 빠른 컴퓨터이다. 시간은 우리가 재는 방법에 따라 여러 가지로 정의할 수 있는데, 제일 쉽게 생각할 수 있는 것은 응답시간이라 부르는 것이다. 이것은 한 작업을 끝내는 데 필요한 전체 시간을 뜻하는 것으로 디스크 접근, 메모리 접근, 입출력 작업, 운영체제 오버헤드 등 모든 시간을 다 더한 것이다.  
  
순수하게 이 프로그램을 실행하기 위해 소비한 시간을 CPU 실행시간(CPU execution time) 또는 단순히 CPU 시간(CPU time)이라고 하는데, 입출력에 걸린 시간이나 다른 프로그램을 실행하는 데 걸린 시간은 여기 포함되지 않는다.  
  
CPU 시간은 다음 두 가지로 나눌 수 있다.  
- 사용자 CPU 시간(user CPU time): 실제로 사용자 프로그램 실행에 소요된 시간  
- 시스템 CPU 시간(system CPU time): 운영체제가 이 프로그램을 위한 작업을 수행하기 위해 소비한 시간  
시스템 CPU 시간과 사용자 CPU 시간을 정확히 구하는 것은 쉽지 않다.  
  
프로그램의 성능을 개선하기 위해서는 어떤 성능 척도들이 중요한지를 먼저 명확히 정의한 다음, 프로그램을 수행시키면서 성능을 측정함으로써 병목이 될 가능성이 있는 부분을 조사하여 정확한 성능 병목 지점을 찾아야 한다.  
  
거의 모든 컴퓨터는 하드웨어 이벤트가 발생하는 시점을 결정하는 클럭을 이용하여 만들어진다. 이 클럭의 시간 간격을 클럭 사이클이라 한다. 클럭 주기는 한 클럭 사이클에 걸리는 시간이나 클럭 속도로 표시한다. 클럭 속도는 클럭 주기의 역수이다.  
  
> 클럭 신호는 논리상태 H(high, 논리 1)와 L(low, 논리 0)이 주기적으로 나타나는 방형파 신호를 말한다.
  
클럭 사이클 수와 클럭 사이클 시간으로 CPU 시간을 표시하면 다음과 같다.  
$프로그램 CPU 실행시간 = 프로그램 CPU 클럭 사이클 수 * 클럭 사이클 시간$  
$프로그램 CPU 실행시간 = \frac{프로그램 CPU 클럭 사이클 수}{클럭 속도}$  
  
이 공식을 보면 클럭 사이클의 길이를 줄이거나 프로그램 실행에 필요한 클럭 사이클 수를 줄이면 성능을 개선할 수 있음을 알 수 있다. 이 둘 중 하나를 감소시키면 다른 하나가 증가하는 경우가 자주 발생한다.
  
앞의 예에서 사용한 수식에는 프로그램 수행에 필요한 명령어 개수에 관한 사항이 포함되어 있지 않다. 그러나 컴파일러가 실행할 명령어를 생성하고 컴퓨터는 이 명령어를 실행해야 하기 때문에, 실행시간은 프로그램의 명령어 수와 관련이 있다.  
$CPU 클럭 사이클 수 = 명령어 수 * 명령어당 평균 클럭 사이클 수$  
  
명령어당 평균 클럭 사이클 수(clock cycles per instruction)은 CPI로 줄여 쓰기도 한다. 명령어마다 실행시간이 다르므로 CPI는 프로그램이 실행한 모든 명령어에 대해 평균값을 사용한다.  
  
> CPI는 프로그램 전체 혹은 일부에서 명령어 하나 실행에 필요한 평균 클럭 사이클 수를 말한다.  
  
이제 성능식을 명령어 개수, CPI, 클럭 사이클 시간으로 표현할 수 있다.  
$CPU 시간 = 명령어 개수 * CPI * 클럭 사이클 시간$  
  
클럭 속도는 클럭 사이클 시간의 역수이므로,  
$CPU 시간 = \frac{명령어 개수 * CPI}{클럭 속도}$  
로 나타낼 수 있다.  

클럭 사이클 시간은 보통 컴퓨터의 `하드웨어 매뉴얼`에 기록되어 있다.    
`하드웨어 카운터`를 사용하면 실행 명령어 수나 평균 CPI, 심지어는 성능 저하의 원인까지 찾아낼 수 있다.  